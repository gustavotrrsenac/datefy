<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Perfil - DateFY</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/fonts.css') }}">

  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>

<!-- SIDEBAR -->
<aside class="sidebar">
  <h2 class="logo">Date<span>FY</span></h2>
  <ul>
    <li><a href="{{ url_for('dashboard') }}"> VisÃ£o Geral</a></li>
    <li><a href="{{ url_for('vida_pessoal') }}"> Vida Pessoal</a></li>
    <li><a href="{{ url_for('financas') }}"> FinanÃ§as</a></li>
    <li><a href="{{ url_for('perfil') }}" class="active"> Perfil</a></li>
    <li><a href="{{ url_for('logout') }}"> Sair</a></li>
  </ul>
</aside>


<!-- CONTEÃšDO PRINCIPAL -->
<main class="perfil-container" x-data="{aba: 'pessoais'}">

  <h1 class="titulo-perfil">Perfil</h1>

  <!-- BLOCO FOTO + NOME -->
  <div class="perfil-box">

    <div class="perfil-usuario">
        <img src="{{ url_for('static', filename='img/avatar.png') }}" alt="Foto do usuÃ¡rio">
        <a href="{{ url_for('editar_perfil') }}" class="btn-editar-foto">âœ</a>
        </div>

      <div class="perfil-topo">
        <h2>{{ usuario.nome }}</h2>
        <p>Gerencie suas informaÃ§Ãµes e configuraÃ§Ãµes</p>
      </div>
    </div> 

    <div style="display:flex; gap:20px; margin-top:20px;">

      <!-- ABAS -->
      <div class="perfil-tabs">
        <button :class="{ 'active': aba === 'pessoais' }" @click="aba = 'pessoais'">ğŸ‘¤ Dados Pessoais</button>
        <button :class="{ 'active': aba === 'seguranca' }" @click="aba = 'seguranca'">ğŸ”’ SeguranÃ§a</button>
        <button :class="{ 'active': aba === 'contas' }" @click="aba = 'contas'">ğŸ¦ Contas BancÃ¡rias</button>
        <button :class="{ 'active': aba === 'notificacoes' }" @click="aba = 'notificacoes'">ğŸ”” NotificaÃ§Ãµes</button>
      </div>

      <!-- CONTEÃšDO DAS ABAS -->
      <div class="perfil-content">

        <!-- DADOS PESSOAIS -->
        <div x-show="aba === 'pessoais'">
          <h3 style="margin-bottom:18px;">Dados Pessoais</h3>

          <form method="POST" action="{{ url_for('editar_perfil') }}">

            <div class="form-group">
              <label>Nome completo</label>
              <input class="form-input" name="nome" value="{{ usuario.nome }}">
            </div>

            <div class="form-group">
              <label>E-mail</label>
              <input class="form-input" name="email" value="{{ usuario.email }}">
            </div>

            <button class="btn-principal">Salvar AlteraÃ§Ãµes</button>
          </form>
        </div>

        <!-- SEGURANÃ‡A -->
        <div x-show="aba === 'seguranca'">
          <h3 style="margin-bottom:18px;">SeguranÃ§a</h3>

          <form method="POST" action="{{ url_for('recuperar_senha') }}">
            <div class="form-group">
              <label>Senha Atual</label>
              <input type="password" class="form-input" name="senha_atual">
            </div>

            <div class="form-group">
              <label>Nova Senha</label>
              <input type="password" class="form-input" name="nova_senha">
            </div>

            <div class="form-group">
              <label>Confirmar Nova Senha</label>
              <input type="password" class="form-input" name="confirmar_senha">
            </div>

            <button class="btn-principal">Alterar Senha</button>
          </form>
        </div>

        <!-- CONTAS BANCÃRIAS -->
        <div x-show="aba === 'contas'">
          <h3 style="margin-bottom:18px;">Contas BancÃ¡rias</h3>

          {% for conta in contas %}
            <div style="background:#1B3C53;padding:14px;border-radius:10px;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center;">
              <div>
                <strong>{{ conta.banco }}</strong><br>
                <span style="color:#cbd8e4;font-size:13px;">
                  AgÃªncia: {{ conta.agencia }} â€” Conta: {{ conta.numero }}
                </span>
              </div>
              <span style="font-size:20px;color:white;">â‹®</span>
            </div>
          {% endfor %}

          <a href="{{ url_for('criar_conta') }}"
             style="display:flex;justify-content:center;align-items:center;border:2px dashed #456882;padding:12px;border-radius:10px;color:#cbd8e4;cursor:pointer;">
            â• Vincular Nova Conta
          </a>
        </div>

      </div>

    </div>

  </div>
</main>

</body>
</html>
