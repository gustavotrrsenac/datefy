<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Perfil - DateFY</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

<!-- Aba lateral -->
<aside class="sidebar">
    <h2 class="logo">Date<span>FY</span></h2>
    <ul>
      <li><a href="{{ url_for('dashboard') }}"> Visão Geral</a></li>
      <li><a href="{{ url_for('vida_pessoal') }}"> Vida Pessoal</a></li>
      <li><a href="{{ url_for('financas') }}" > Finanças</a></li>
      <li><a href="{{ url_for('perfil') }}" class="active" > Perfil</a></li>
      <li><a href="{{ url_for('logout') }}"> Sair</a></li>
      <main class="flex-grow p-1 md:p-10"></main>
    </ul>
  </aside>

<script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-base': '#1B3C53',
            'brand-accent-light': '#456882',
            'brand-accent-dark': '#234C6A',
            'brand-primary-button': '#456882',
            'brand-primary-button-hover': '#5a82a2',
          },
          fontFamily: {
            'sans': ['Poppins', 'Inter', 'sans-serif'],
          },
        },
      },
    }
</script>
</head>

<body class="bg-brand-base font-sans text-white" x-data="{ activeTab: 'pessoais' }">

<div class="flex min-h-screen flex-col bg-brand-base">

<!-- Header -->
<header class="bg-brand-accent-dark/50 py-4 px-6 md:px-10 shadow-lg backdrop-blur-sm">
    <h1 class="text-3xl font-bold tracking-wider text-white">DateFY</h1>
</header>


<!-- Main -->
<main class="flex-grow p-6 md:p-10">
<div class="mx-auto max-w-4xl">

<!-- Perfil (foto + nome) -->
<div class="mb-8 flex items-center gap-6">
    <div class="relative">
        <img src="{{ url_for('static', filename='img/avatar.png') }}"
             alt="Foto do usuário"
             class="h-28 w-28 rounded-full object-cover ring-4 ring-brand-accent-light">

        <a href="{{ url_for('editar_perfil') }}"
           class="absolute bottom-0 right-0 flex h-8 w-8 items-center justify-center rounded-full bg-brand-primary-button text-white transition-colors hover:bg-brand-primary-button-hover">
            <span class="material-symbols-outlined text-base">edit</span>
        </a>
    </div>

    <div>
        <h2 class="text-3xl font-bold">{{ usuario.nome }}</h2>
        <p class="text-gray-300">Gerencie suas informações e configurações.</p>
    </div>
</div>


<!-- Divisão da tela -->
<div class="flex flex-col md:flex-row md:space-x-8">

<!-- Sidebar interna de abas -->
<aside class="mb-8 flex-shrink-0 md:mb-0 md:w-1/3 lg:w-1/4">
<nav class="flex flex-row space-x-2 overflow-x-auto md:flex-col md:space-x-0 md:space-y-2">

    <button
        :class="{ 'bg-brand-accent-light text-white': activeTab === 'pessoais', 'text-gray-300 hover:bg-brand-accent-dark hover:text-white': activeTab !== 'pessoais' }"
        @click="activeTab = 'pessoais'"
        class="flex w-full items-center rounded-md px-4 py-3 text-left text-sm font-medium transition-colors">
        <span class="material-symbols-outlined mr-3">person</span>
        Dados Pessoais
    </button>

    <button
        :class="{ 'bg-brand-accent-light text-white': activeTab === 'seguranca', 'text-gray-300 hover:bg-brand-accent-dark hover:text-white': activeTab !== 'seguranca' }"
        @click="activeTab = 'seguranca'"
        class="flex w-full items-center rounded-md px-4 py-3 text-left text-sm font-medium transition-colors">
        <span class="material-symbols-outlined mr-3">lock</span>
        Segurança
    </button>

    <button
        :class="{ 'bg-brand-accent-light text-white': activeTab === 'contas', 'text-gray-300 hover:bg-brand-accent-dark hover:text-white': activeTab !== 'contas' }"
        @click="activeTab = 'contas'"
        class="flex w-full items-center rounded-md px-4 py-3 text-left text-sm font-medium transition-colors">
        <span class="material-symbols-outlined mr-3">account_balance</span>
        Contas Bancárias
    </button>

    <button
        :class="{ 'bg-brand-accent-light text-white': activeTab === 'notificacoes', 'text-gray-300 hover:bg-brand-accent-dark hover:text-white': activeTab !== 'notificacoes' }"
        @click="activeTab = 'notificacoes'"
        class="flex w-full items-center rounded-md px-4 py-3 text-left text-sm font-medium transition-colors">
        <span class="material-symbols-outlined mr-3">notifications</span>
        Notificações
    </button>

</nav>
</aside>


<!-- Conteúdo das abas -->
<div class="flex-grow rounded-lg bg-brand-accent-dark/80 p-6 shadow-2xl backdrop-blur-sm">

<!-- Aba: Dados Pessoais -->
<div x-cloak x-show="activeTab === 'pessoais'">
    <h3 class="mb-6 text-xl font-semibold">Dados Pessoais</h3>

    <form class="space-y-6" method="POST" action="{{ url_for('editar_perfil') }}">
        <div>
            <label class="mb-2 block text-sm font-medium text-gray-300">Nome completo</label>
            <input type="text" name="nome"
                   value="{{ usuario.nome }}"
                   class="w-full rounded-md bg-brand-base/70 px-4 py-3 text-white"/>
        </div>

        <div>
            <label class="mb-2 block text-sm font-medium text-gray-300">E-mail</label>
            <input type="email" name="email"
                   value="{{ usuario.email }}"
                   class="w-full rounded-md bg-brand-base/70 px-4 py-3 text-white"/>
        </div>

        <button type="submit"
                class="rounded-md bg-brand-primary-button px-4 py-3 text-base font-semibold text-white shadow-lg hover:bg-brand-primary-button-hover">
            Salvar Alterações
        </button>
    </form>
</div>


<!-- Aba: Segurança -->
<div x-cloak x-show="activeTab === 'seguranca'">
    <h3 class="mb-6 text-xl font-semibold">Segurança</h3>

    <form class="space-y-6" method="POST" action="{{ url_for('recuperar_senha') }}">

        <div>
            <label class="mb-2 block text-sm font-medium text-gray-300">Senha Atual</label>
            <input type="password" name="senha_atual"
                   class="w-full rounded-md bg-brand-base/70 px-4 py-3 text-white"/>
        </div>

        <div>
            <label class="mb-2 block text-sm font-medium text-gray-300">Nova Senha</label>
            <input type="password" name="nova_senha"
                   class="w-full rounded-md bg-brand-base/70 px-4 py-3 text-white"/>
        </div>

        <div>
            <label class="mb-2 block text-sm font-medium text-gray-300">Confirmar Nova Senha</label>
            <input type="password" name="confirmar_senha"
                   class="w-full rounded-md bg-brand-base/70 px-4 py-3 text-white"/>
        </div>

        <button type="submit"
                class="rounded-md bg-brand-primary-button px-4 py-3 text-base font-semibold hover:bg-brand-primary-button-hover">
            Alterar Senha
        </button>
    </form>
</div>


<!-- Aba: Contas Bancárias -->
<div x-cloak x-show="activeTab === 'contas'">
    <h3 class="mb-6 text-xl font-semibold">Contas Bancárias</h3>

    {% for conta in contas %}
    <div class="flex items-center justify-between rounded-md bg-brand-base/50 p-4 mb-4">
        <div>
            <p class="font-semibold">{{ conta.banco }}</p>
            <p class="text-sm text-gray-400">
                Agência: {{ conta.agencia }} — Conta: {{ conta.numero }}
            </p>
        </div>
        <span class="material-symbols-outlined text-gray-300">more_vert</span>
    </div>
    {% endfor %}

    <a href="{{ url_for('criar_conta') }}"
       class="flex w-full justify-center gap-2 rounded-md border-2 border-dashed border-brand-accent-light px-4 py-3 text-gray-300 hover:bg-brand-accent-light/30">
        <span class="material-symbols-outlined">add</span>
        Vincular Nova Conta
    </a>
</div>

</div>
</div>
</div>
</main>

</div>

<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</body>
</html>
