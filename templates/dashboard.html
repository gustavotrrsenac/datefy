<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DateFY</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
</head>

<body>

  <aside class="sidebar">
    <h2 class="logo">Date<span>FY</span></h2>
    <ul>
      <li><a href="{{ url_for('dashboard') }}" class="active"> Vis칚o Geral</a></li>
      <li><a href="{{ url_for('vida_pessoal') }}"> Vida Pessoal</a></li>
      <li><a href="{{ url_for('financas') }}"> Finan칞as</a></li>
      <li><a href="{{ url_for('perfil') }}"> Perfil</a></li>
      <li><a href="{{ url_for('logout') }}"> Sair</a></li>
    </ul>
  </aside>

  <main>

    <h1 class="titulo-pagina">Ol치, {{ nome }} </h1>
    <p class="descricao-texto">Aqui est치 seu dashboard atualizado.</p>

    <!-- Painel dos cards -->
    <section class="cards-dashboard">
      <div class="card-box">
        <h3>Tarefas do dia</h3>
        <p id="dash-tarefas">0</p>
      </div>

      <div class="card-box entrada">
        <h3>Entradas</h3>
        <p id="dash-entradas">R$ 0,00</p>
      </div>

      <div class="card-box saida">
        <h3>Sa칤das</h3>
        <p id="dash-saidas">R$ 0,00</p>
      </div>

      <div class="card-box total">
        <h3>Total</h3>
        <p id="dash-total">R$ 0,00</p>
      </div>
    </section>

    <!-- CALEND츼RIO -->
    <section class="painel-info" style="margin-top:18px;">
      <h3>Calend치rio</h3>
      <div id="calendar"></div>

      <div id="eventos-dia">
        <h4>Eventos do Dia</h4>
        <ul id="lista-eventos"></ul>
      </div>
    </section>

    <!-- LEMBRETES  -->
    <section class="painel-info" style="margin-top:18px;">
      <h3>Lembretes</h3>

      <table class="tabela-lembretes">
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Descri칞칚o</th>
            <th>Data</th>
            <th>Status</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>Conta</td>
            <td>Pagar luz</td>
            <td>05/12/2025 - 09:00</td>
            <td>游릳</td>
          </tr>

          <tr>
            <td>Entrada</td>
            <td>Sal치rio</td>
            <td>01/12/2025</td>
            <td>游릴</td>
          </tr>

          <tr>
            <td>Evento</td>
            <td>Reuni칚o equipe</td>
            <td>03/12/2025 - 14:00</td>
            <td>游릱</td>
          </tr>
        </tbody>
      </table>
    </section>

  </main>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {

      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'pt-br',
        height: 'auto',

        
        /* EVENTOS */
        events: '/api/tarefas',

        dateClick: function (info) {
          var eventos = calendar.getEvents().filter(ev => ev.startStr === info.dateStr);
          var lista = document.getElementById("lista-eventos");
          lista.innerHTML = "";

          if (eventos.length === 0) {
            lista.innerHTML = "<li>Nenhum evento neste dia.</li>";
          } else {
            eventos.forEach(ev => {
              var li = document.createElement("li");
              li.textContent = ev.title;
              lista.appendChild(li);
            });
          }

          document.getElementById("eventos-dia").style.display = "block";
        }
      });

      calendar.render();

    });

  </script>

</body>

</html>
